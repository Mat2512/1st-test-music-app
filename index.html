<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Afinador Visual â€“ Pages</title>
<link rel="icon" href="data:," />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root{--bg1:#0b0b2a;--bg2:#2a2a72;--neon:#00ffa6;--mag:#ff3af2}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:
    radial-gradient(1200px 600px at 20% -10%, #ff9df5 0%, var(--bg2) 45%, var(--bg1) 100%);
    color:#fff}
  .wrap{max-width:840px;margin:24px auto;padding:16px}
  h1{margin:0 0 12px;font-weight:900;text-shadow:0 0 12px rgba(255,255,255,.35)}
  .panel{background:rgba(255,255,255,.06);border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:14px;margin-top:12px}
  .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  select,input[type=number]{padding:6px 10px;border-radius:8px;border:1px solid #666;background:#0e0e2a;color:#fff}
  button{padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:800}
  .cta{background:linear-gradient(90deg,#00ffa6,#00c3ff);color:#00111a;box-shadow:0 8px 30px rgba(0,255,166,.3)}
  .stop{background:linear-gradient(90deg,#ff6a9e,#ff3af2);color:#fff;box-shadow:0 8px 30px rgba(255,58,242,.25)}
  .meter{height:10px;width:100%;max-width:420px;background:rgba(255,255,255,.12);border-radius:999px;overflow:hidden}
  .fill{height:100%;background:linear-gradient(90deg,#ffc400,#00ffa6)}
  .note{font-size:64px;font-weight:900;letter-spacing:1px}
  .freq{opacity:.85}
  .tuner{position:relative;height:60px;background:rgba(0,0,0,.25);border-radius:12px;margin-top:10px;overflow:hidden}
  .ticks{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:0 12px;font-size:12px;opacity:.65}
  .tick{width:1px;height:100%;border-left:1px dashed rgba(255,255,255,.25);display:flex;align-items:center}
  .pointer{position:absolute;bottom:0;transform:translateX(-50%);width:4px;height:100%;border-radius:4px}
  .kbd{display:grid;grid-template-columns:repeat(12,1fr);gap:6px;margin-top:12px}
  .key{padding:12px 0;text-align:center;border-radius:10px;font-weight:700}
  .status{opacity:.9;margin-top:8px;min-height:20px}
  .hint{font-size:12px;opacity:.75;margin-top:6px}
  .error{color:#ffd2d2}
</style>
</head>
<body>
<div class="wrap">
  <h1>Afinador Visual ðŸŽ¶âœ¨</h1>

  <div class="panel">
    <div class="row">
      <label>Microfone:</label>
      <select id="mic"></select>
      <button id="refresh">Atualizar mics</button>
    </div>
    <div class="row" style="margin-top:8px">
      <label>Sensibilidade (ganho): <span id="gainVal">0</span> dB</label>
      <input id="gain" type="range" min="-12" max="24" step="1" value="0" style="width:220px" />
      <label>A4 (Hz):</label>
      <input id="a4" type="number" min="415" max="466" step="1" value="440" />
      <label>Modo voz:</label>
      <select id="voice">
        <option value="bass">Grave (50â€“400 Hz)</option>
        <option value="tenor" selected>Tenor/Mezzo (70â€“900 Hz)</option>
        <option value="soprano">Aguda (150â€“1200 Hz)</option>
      </select>
    </div>
    <div class="row" style="margin-top:10px">
      <button id="start" class="cta">ComeÃ§ar</button>
      <button id="stop"  class="stop" disabled>Parar</button>
    </div>
    <div id="msg" class="status">Clique em <b>ComeÃ§ar</b> e permita o microfone. Se jÃ¡ bloqueou, clique no <b>cadeado</b> da barra e mude para <b>Permitir</b>.</div>

    <div class="meter" style="margin-top:10px"><div id="fill" class="fill" style="width:0%"></div></div>
    <div class="hint">NÃ­vel de entrada (RMS): <span id="rms">0.000</span></div>
  </div>

  <div class="panel" id="readout">
    <div class="note" id="note">â€”</div>
    <div class="freq" id="freq">Aguardando som...</div>
    <div class="tuner">
      <div class="ticks">
        <div class="tick"><span style="opacity:.7">-50</span></div>
        <div class="tick"><span style="opacity:.7">-25</span></div>
        <div class="tick"><span style="opacity:.7">0</span></div>
        <div class="tick"><span style="opacity:.7">25</span></div>
        <div class="tick"><span style="opacity:.7">50</span></div>
      </div>
      <div id="ptr" class="pointer" style="left:50%;background:#ff3af2;box-shadow:0 0 16px #ff3af2"></div>
    </div>
    <div class="hint">Desvio: <b id="cents">0</b> cents</div>
    <div class="kbd" id="kbd"></div>
    <div id="err" class="hint error"></div>
  </div>
</div>

<!-- carrega o JS externo -->
<script src="main.js" defer></script>
</body>
</html>
